self.addEventListener("push",(t=>{let o={title:"Story App",options:{body:"New notification"}};if(t.data)try{const i=JSON.parse(t.data.text());o={title:i.title||o.title,options:{body:i.options?.body||i.body||o.options.body,icon:"./images/logo.png",badge:"./images/logo.png",vibrate:[100,50,100],data:{url:i.options?.data?.url||"/"},actions:[{action:"explore",title:"Lihat"},{action:"close",title:"Tutup"}]}}}catch(i){o.options.body=t.data.text()}t.waitUntil(self.registration.showNotification(o.title,o.options))})),self.addEventListener("notificationclick",(t=>{if(t.notification.close(),"explore"===t.action||!t.action){const o=t.notification.data.url||"/";t.waitUntil(clients.matchAll({type:"window",includeUncontrolled:!0}).then((t=>{for(const i of t)if(i.url===o&&"focus"in i)return i.focus();if(clients.openWindow)return clients.openWindow(o)})))}}));